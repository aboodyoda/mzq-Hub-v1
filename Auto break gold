-- GoldBreaker.lua

local GoldBreaker = {}
GoldBreaker.Enabled = false
GoldBreaker.BreakRadius = 20

local function breakClosestGold()
    local localPlayer = game:GetService("Players").LocalPlayer
    local character = localPlayer.Character
    local humanoidRootPart = character and character:FindFirstChild("HumanoidRootPart")
    
    if not humanoidRootPart then return end
    
    local resources = game:GetService("Workspace"):FindFirstChild("Resources")
    local localPosition = humanoidRootPart.Position

    for _, resourceNode in pairs(resources:GetChildren()) do
        local targetPart = resourceNode:FindFirstChild("small rock") 
                       or resourceNode:FindFirstChildWhichIsA("Part") 
                       or resourceNode:FindFirstChildWhichIsA("UnionOperation")

        if targetPart and (targetPart.Position - localPosition).Magnitude < GoldBreaker.BreakRadius then
            local breakTable = {[1] = targetPart}
            game:GetService("ReplicatedStorage"):WaitForChild("Events"):WaitForChild("SwingTool"):FireServer(breakTable)
        end
    end
end

function GoldBreaker.AutoBreak()
    while GoldBreaker.Enabled do
        wait(0.5)
        breakClosestGold()
    end
end

return GoldBreaker
